## Шаги обработки данных

Ниже представлен пошаговый разбор действий, выполненных в предоставленном файле.

---

### 1. Обработка датасета `df_hits`

#### Что сделано?
1. **Колонка "hit_date"**:  
   - Преобразована в удобный формат даты-времени.
   - Из нее извлечены год, месяц, день, день недели и признак выходного дня.
   
2. **Колонка "hit_time"**:  
   - Пустые значения заполнены путем линейной интерполяции.
   
3. **Колонка "event_label"**:  
   - Пропущенные значения заменены нулями.
   
4. **Колонка "hit_page_path"**:  
   - Выделены конкретные пути веб-ресурсов в отдельные колонки, соответствующие домену и типу страницы.
   
5. **Категории событий**:  
   - Колонки `event_category`, `event_action`, `event_label` закодированы с помощью метода OrdinalEncoder, что позволяет перевести строки в численные значения.
   
6. **Удаление неиспользуемых колонок**:  
   - Исключены колонки `hit_date`, `hit_referer`, `hit_page_path`, поскольку они больше не нужны.

---

### 2. Обработка датасета `df_sessions`

#### Что сделано?
1. **Уменьшение числа колонок**:  
   - Убраны некоторые избыточные или малозначимые столбцы, такие как идентификатор клиента, модель устройства и разрешение экрана.
   
2. **Заполнение пропусков**:  
   - Незначащие элементы в ряде столбцов, таких как рекламные кампании и источник трафика, заменены на стандартизированное значение `"unknown"`.
   
3. **Разбиение временного параметра**:  
   - Дата и время посещения разделены на составляющие (год, месяц, день, день недели, рабочий или выходной день, час посещения).
   
4. **Классификация устройств**:  
   - Используются только три самые распространенные версии браузеров и операционных систем, остальные маркируются как "другое".
   
5. **One-Hot encoding**:  
   - Некоторые ключевые признаки типа устройства и операционной системы представлены в виде двоичных индикаторов (наличие-отсутствие).
   
6. **Топовые UTM-метки**:  
   - Только наиболее часто встречающиеся источники, каналы и другие рекламно-трекинговые параметры оставлены, остальные сгруппированы под одним названием "other".
   
7. **OrdinalEncoding остальных признаков**:  
   - Остальные категориальные признаки были переведены в числовой вид с помощью одного общего подхода (OrdinalEncoder).

---

### 3. Объединение датасетов `df_hits` и `df_sessions`

1. **Создание единого датасета**:  
   - Два набора данных объединены по общими ключевым признакам (идентификатор сессии, год, месяц, день, день недели и признак выходного дня).
   
2. **Предварительное заполнение пропусков**:  
   - Оставшиеся пустоты в итоговом объединенном датасете заполнены нулевым значением.
   
3. **Кодировка оставшихся признаков**:  
   - Важные идентификационные признаки, такие как идентификаторы сессий, дополнительно перевели в числовую форму.

---

### 4. Подготовка итогового датасета

Итоговая версия объединяет подготовленный объединенный датасет и сохраняет его для последующей работы. Здесь проведен финальный контроль наличия пропущенных значений и сохранение результата в CSV-файл.

---

### 5. Попытка снизить размерность данных

Хотя попытка была сделана для снижения размерности с помощью алгоритма UMAP, в связи с большими размерами данных выполнение привело к ошибке. Это решение пока отложено для дальнейшей оптимизации ресурсов.

---

Таким образом, рассмотренный скрипт охватывает весь цикл обработки данных, начиная от загрузки и первичного анализа и заканчивая созданием унифицированного набора данных, готового для анализа и построения моделей машинного обучения.
